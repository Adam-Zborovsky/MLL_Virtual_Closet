val pickImg = Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI)
        val chooseImage =
            registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { it ->
                val data = it.data
                val imgUri = data?.data
                Log.i("Uri",imgUri.toString())
                if (imgUri != null) {
                    val ref = storageRef.child(imgUri.path.toString().split("/").toString())
                    val uploadTask = ref.putFile(imgUri)
                    val urlTask = uploadTask.continueWithTask {
                        ref.downloadUrl
                    }.addOnCompleteListener { task ->
                        if (task.isSuccessful) {
                            val downloadUri = task.result
                            db.collection("Upload in Progress").document("Image")
                                .set(hashMapOf("Url" to downloadUri))
                                .addOnSuccessListener { Log.d("db.collection", "DocumentSnapshot successfully written!") }
                                .addOnFailureListener { Log.e("db.collection", "Error writing document", ) }
                        }
                    }
                }
            }
                uploadButton.setOnClickListener {
                    chooseImage.launch(pickImg).toString()
                    var metadata = metaOfFile(pickImg, chooseImage)
                }
            }

    private fun metaOfFile(pickImg:Intent, chooseImage: ActivityResultLauncher<Intent>): ArrayList<Any>? {
        var metadata: ArrayList<Any>? = null
        val builder = AlertDialog.Builder(this)
        val inflater: LayoutInflater = layoutInflater
        val dialogLayout = inflater.inflate(R.layout.upload_dialog_box, null)
        val name = dialogLayout.findViewById<EditText>(R.id.name)
        val adamLike = dialogLayout.findViewById<EditText>(R.id.adamLike)
        val shaharLike = dialogLayout.findViewById<EditText>(R.id.shaharLike)
        val typeOfCloths = dialogLayout.findViewById<SwitchCompat>(R.id.switchCloths)

        builder.setView(dialogLayout)
        builder.setPositiveButton("Ok") { _, _ ->
            Log.d("Main", "Positive button clicked")
            Log.i("Name", name.text.toString())
            Log.i("Adam Like", adamLike.text.toString())
            Log.i("Shahar Like", shaharLike.text.toString())
            Log.i("typeOfCloths", typeOfCloths.isChecked.toString())
            metadata = arrayListOf(name.text.toString(), adamLike.text.toString(), shaharLike.text.toString() ,typeOfCloths.isChecked)
        }
        builder.setNegativeButton("Cancel") { _, _ ->
            Log.d("Main", "Negative button clicked")}
        builder.show()

        return metadata
    }